
<md-expansion-panel>
  <md-expansion-panel-header>
    <md-panel-title>
        <span *ngIf='attachments'>{{title | translate}} : {{attachments.length}}</span>
    </md-panel-title>
    <md-panel-description>
      {{ 'record.edit.attachments.subtitle' | translate }}
    </md-panel-description>
  </md-expansion-panel-header>



<div>
  <md-action-row>
    <button md-raised-button color='primary' (click)='addAttachmentBottom()' mdTooltip='{{"record.edit.addattachment" | translate}}' class='panel-button'><md-icon>insert_link</md-icon></button>
    <md-spinner *ngIf='loading' mode='indeterminate'></md-spinner>
    <div *ngIf='responsemessage && responsemessage.error' class='error-label-message'>
      <md-icon>cloud_off</md-icon>  {{responsemessage.error}}
    </div>
    <div *ngIf='responsemessage && !responsemessage.error' class='success-label-message'>
      <md-icon >cloud_done</md-icon>
    </div>
  </md-action-row>
  
<div *ngFor='let attachment of attachments; let i=index' class='input-group'>

  <md-card>
    <md-input-container class='full-width-input'>
      <input mdInput placeholder='{{"field.label.attachment.title" | translate}}' [(ngModel)]='attachments[i].title' type='text'>
    </md-input-container>

    <md-input-container class='full-width-input'>
      <input mdInput placeholder='{{"field.label.attachment.url" | translate}}' [(ngModel)]='attachments[i].url' type='text'>
    </md-input-container>

    <md-input-container class='full-width-input'>
      <input mdInput placeholder='{{"field.label.attachment.description" | translate}}' [(ngModel)]='attachments[i].description' type='text'>
    </md-input-container>
    <md-toolbar>
      <span class='fill-remaining-space'></span>
      <button (click)='moveAttachmentUp(i)'  md-raised-button color='primary'  class='panel-button'><md-icon>arrow_upward</md-icon></button>
      <span class='toolbar-spacer'></span>
      <button (click)='moveAttachmentDown(i)'  md-raised-button color='primary'  class='panel-button'><md-icon>arrow_downward</md-icon></button>
      <span class='toolbar-spacer'></span>
      <span class='toolbar-spacer'></span>
      <button (click)='deleteAttachment(i)'  md-raised-button color='primary'  class='panel-button'><md-icon>delete_forever</md-icon></button>
      <span class='toolbar-spacer'></span>
      <button *ngIf='adminrole' (click)='download(i)'  md-raised-button color='primary' class='panel-button' ><md-icon>backup</md-icon></button>

    </md-toolbar>
  </md-card>

</div>


</div>


</md-expansion-panel>
